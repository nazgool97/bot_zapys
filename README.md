# üìÖ Telegram Bot –ó–∞–ø–∏—Å–∏ –Ω–∞ —É—Å–ª—É–≥–∏

Telegram-–±–æ—Ç –¥–ª—è –æ–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ —É—Å–ª—É–≥–∏ (–º–∞–Ω–∏–∫—é—Ä, —Å—Ç—Ä–∏–∂–∫–∞ –∏ –¥—Ä.) —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL –∏ –∑–∞–ø—É—Å–∫–æ–º —á–µ—Ä–µ–∑ Docker Compose.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏, –¥–∞—Ç—ã, –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–∞—Å—Ç–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –≤–∏–∑–∏—Ç–æ–º
- –û—á–µ—Ä–µ–¥—å, –µ—Å–ª–∏ —Å–ª–æ—Ç –∑–∞–Ω—è—Ç
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç–∑—ã–≤—ã –¥–ª—è –∞–¥–º–∏–Ω–∞
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL (–Ω–∞–¥—ë–∂–Ω–æ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ)
- –ó–∞–ø—É—Å–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö Docker


## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python 3.12
- pyTelegramBotAPI
- PostgreSQL 15
- Docker + Docker Compose
- python-dotenv –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
bot_zapys/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ bot.py          # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.json     # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ db.py           # —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ handlers.py     # –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py    # –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils.py        # –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –æ—á–µ—Ä–µ–¥—å
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```
## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```
git clone https://github.com/nazgool97/bot_zapys.git
cd bot_zapys
```
2. –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
```
cp .env.example .env
```
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```
BOT_TOKEN=—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
DB_HOST=db
DB_PORT=5432
DB_NAME=botdb
DB_USER=botuser
DB_PASSWORD=mypassword
ADMIN_ID=123456789
```
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker Compose
```
docker-compose up --build -d
```
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞
```
docker-compose logs -f bot
```
## üóÑÔ∏è –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL —Å —Ö–æ—Å—Ç–∞:
```
psql -h localhost -U botuser -d botdb
```
–ü–∞—Ä–æ–ª—å ‚Äî mypassword (–∏–ª–∏ –≤–∞—à –∏–∑ .env).
## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ config.json
–§–∞–π–ª app/config.json –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ—Ç–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞.
## üìÑ –ü—Ä–∏–º–µ—Ä config.json
```
{
  "admin_id": 123456789,
  "working_weekdays": [0, 1, 2, 3, 4, 5],
  "reminder_minutes_before": 60,
  "services": {
    "manicure": {
      "name": "üíÖ –ú–∞–Ω—ñ–∫—é—Ä",
      "duration_minutes": 30,
      "start_time": "10:00",
      "end_time": "17:00",
      "masters": {
        "anna": "–ê–Ω–Ω–∞",
        "olga": "–û–ª—è"
      }
    },
    "haircut": {
      "name": "‚úÇÔ∏è –°—Ç—Ä–∏–∂–∫–∞",
      "duration_minutes": 30,
      "start_time": "10:00",
      "end_time": "17:00",
      "masters": {
        "ivan": "–Ü–≤–∞–Ω"
      }
    }
  },
  "messages": {
    "welcome": "–ü—Ä–∏–≤—ñ—Ç! –û–±–µ—Ä—ñ—Ç—å –ø–æ—Å–ª—É–≥—É:",
    "choose_day": "–û–±–µ—Ä—ñ—Ç—å –¥–µ–Ω—å:",
    "choose_time": "–û–±–µ—Ä—ñ—Ç—å —á–∞—Å:",
    "preview": "üíÖ *{service}*\nüìÖ {day} {month_name} {year}\nüïê {time}",
    "recorded": "‚úÖ –ó–∞–ø–∏—Å–∞–Ω–æ!",
    "canceled": "‚ùå –ó–∞–ø–∏—Å—å –æ—Ç–º–µ–Ω–µ–Ω–∞.",
    "no_records": "–£ –≤–∞—Å –Ω–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤."
  }
}
```
## üîß –ß—Ç–æ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å
| –ü–æ–ª–µ                      | –û–ø–∏—Å–∞–Ω–∏–µ                                                    |
| ------------------------- | ----------------------------------------------------------- |
| `admin_id`                | Telegram-ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ø–æ–ª—É—á–∏—Ç—å —É @userinfobot)        |
| `working_weekdays`        | –†–∞–±–æ—á–∏–µ –¥–Ω–∏: 0=–ü–Ω, 1=–í—Ç, ‚Ä¶, 6=–í—Å                            |
| `reminder_minutes_before` | –ó–∞ —Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –Ω–∞–ø–æ–º–Ω–∏—Ç—å –æ –∑–∞–ø–∏—Å–∏                         |
| `services`                | –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥: –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã, –º–∞—Å—Ç–µ—Ä–∞ |
| `masters`                 | –ö–ª—é—á = ID –º–∞—Å—Ç–µ—Ä–∞, –∑–Ω–∞—á–µ–Ω–∏–µ = –∏–º—è –¥–ª—è –∫–Ω–æ–ø–∫–∏                |
| `messages`                | –õ—é–±—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞                              |

## üöÄ –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `app/config.json`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```
docker-compose restart bot
```
–ì–æ—Ç–æ–≤–æ! –ë–æ—Ç —Å—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
## üìä –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
| –ö–æ–º–∞–Ω–¥–∞           | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| ----------------- | ------------------------------- |
| `/start`, `/menu` | –ó–∞–ø—É—Å–∫ –º–µ–Ω—é                     |
| `/my`             | –ú–æ–∏ –∑–∞–ø–∏—Å–∏                      |
| `/stats`          | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∞–¥–º–∏–Ω)              |
| `/admin`          | –í—Å–µ –∑–∞–ø–∏—Å–∏ (–∞–¥–º–∏–Ω)              |
| `/today`          | –ó–∞–ø–∏—Å–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (–∞–¥–º–∏–Ω)       |
| `/feedback`       | –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –∏ –æ—Ç–∑—ã–≤—ã (–∞–¥–º–∏–Ω) |
| `/addslot`        | –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ—Ç –≤—Ä—É—á–Ω—É—é (–∞–¥–º–∏–Ω)   |
| `/help`           | –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥                   |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/start` –∏ –ø—Ä–æ–π–¥–∏—Ç–µ –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø–∏—Å–∏.
–õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```
docker-compose logs -f bot
```
## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
MIT ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π, –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞–π –∏ —Ä–∞–∑–≤–∏–≤–∞–π –ø—Ä–æ–µ–∫—Ç!

